{"version":3,"file":"ipay-button-cart.js","sources":["../../src/components/ipay-button-cart.js"],"sourcesContent":["import { BaseIpayButton } from '../shared/base-button.js';\nimport { buttonBaseStyles, variantStyles } from '../shared/styles.js';\nimport { ipayLogo } from '../shared/logo.js';\n\nconst BASE_URL = 'http://185.25.151.171:8411';\nconst TARGET_URL = `${BASE_URL}/new-individual-application`;\n\nclass IpayButtonCart extends HTMLElement {\n  static get observedAttributes() {\n    return [\n      'id', \n      'name', \n      'email', \n      'phone', \n      'delivery_price', \n      'product_id',\n      'cart-items' // JSON string with array of cart items\n    ];\n  }\n\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n  }\n\n  connectedCallback() {\n    this.render();\n    this.addEventListeners();\n  }\n\n  addEventListeners() {\n    const button = this.shadowRoot.querySelector('button');\n    if (button) {\n      button.addEventListener('click', () => {\n        this.handleClick();\n      });\n    }\n  }\n\n  parseCartItems() {\n    const cartItemsAttr = this.getAttribute('cart-items');\n    if (!cartItemsAttr) {\n      return [];\n    }\n\n    try {\n      const items = JSON.parse(cartItemsAttr);\n      if (!Array.isArray(items)) {\n        console.warn('ipay-button-cart: cart-items must be an array');\n        return [];\n      }\n      return items;\n    } catch (e) {\n      console.error('ipay-button-cart: Invalid JSON in cart-items attribute', e);\n      return [];\n    }\n  }\n\n  handleClick() {\n    // Get standard attributes\n    const id = this.getAttribute('id');\n    const name = this.getAttribute('name');\n    const email = this.getAttribute('email');\n    const phone = this.getAttribute('phone');\n    const delivery_price = this.getAttribute('delivery_price');\n    const product_id = this.getAttribute('product_id');\n\n    // Parse cart items\n    const cartItems = this.parseCartItems();\n\n    if (cartItems.length === 0) {\n      console.warn('ipay-button-cart: No cart items provided');\n      return;\n    }\n\n    // Build query parameters\n    const params = new URLSearchParams();\n\n    // Add standard parameters\n    if (id) params.append('id', id);\n    if (name) params.append('name', name);\n    if (email) params.append('email', email);\n    if (phone) params.append('phone', phone);\n    if (delivery_price) params.append('delivery_price', delivery_price);\n    if (product_id) params.append('product_id', product_id);\n\n    // Add cart items\n    // Format: items[0][url]=...&items[0][price]=...&items[0][count]=...\n    cartItems.forEach((item, index) => {\n      if (item.url) params.append(`items[${index}][url]`, item.url);\n      if (item.price) params.append(`items[${index}][price]`, item.price);\n      if (item.count) params.append(`items[${index}][count]`, item.count);\n      \n      // Optional: also support product_id per item if provided\n      if (item.product_id) params.append(`items[${index}][product_id]`, item.product_id);\n    });\n\n    // Add total count of items\n    params.append('items_count', cartItems.length.toString());\n\n    // Navigate to URL with parameters\n    const targetUrl = `${TARGET_URL}?${params.toString()}`;\n    window.open(targetUrl, '_blank');\n  }\n\n  render() {\n    this.shadowRoot.innerHTML = `\n        <style>\n          :host {\n            display: inline-block;\n          }\n  \n          button {\n            background: white;\n            border: 1px solid #E5E7EB;\n            border-radius: 12px;\n            padding: 12px 16px;\n            cursor: pointer;\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n            transition: all 0.2s ease;\n            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n            gap: 12px;\n            min-width: 240px;\n            height: 64px;\n          }\n\n          button:hover {\n            background: #003574;\n            border-color: #003574;\n            box-shadow: 0 4px 12px rgba(0, 53, 116, 0.3);\n            transform: translateY(-2px);\n          }\n  \n          button:active {\n            transform: translateY(0);\n            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n          }\n  \n          .content {\n            display: flex;\n            flex-direction: column;\n            align-items: flex-start;\n            gap: 4px;\n            flex: 1;\n          }\n  \n          .brand {\n            display: flex;\n            align-items: center;\n            gap: 8px;\n          }\n  \n          .logo {\n            transition: filter 0.2s ease;\n          }\n\n          .title {\n            font-size: 14px;\n            color: #1F2937;\n            font-weight: 600;\n            margin: 0;\n            transition: color 0.2s ease;\n          }\n\n          .subtitle {\n            color: var(--Colorblack, #111);\n            font-family: Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n            font-size: 12px;\n            font-style: normal;\n            font-weight: 500;\n            line-height: 100%; /* 12px */\n            letter-spacing: 0.15px;\n            margin: 0;\n            transition: color 0.2s ease;\n          }\n\n          .action {\n            display: flex;\n            align-items: center;\n            gap: 8px;\n            color: var(--Colorblack, #111);\n            font-family: Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n            font-size: 12px;\n            font-style: normal;\n            font-weight: 500;\n            line-height: 100%; /* 12px */\n            letter-spacing: 0.15px;\n            transition: color 0.2s ease;\n          }\n\n          button:hover .logo {\n            filter: brightness(0) invert(1);\n          }\n\n          button:hover .title {\n            color: white;\n          }\n\n          button:hover .subtitle {\n            color: white;\n            opacity: 0.9;\n          }\n\n          button:hover .action {\n            color: white;\n          }\n  \n          .green-dot {\n            width: 12px;\n            height: 12px;\n            background: #10B981;\n            border-radius: 50%;\n            flex-shrink: 0;\n            position: relative;\n          }\n\n          .chevron-right {\n            position: absolute;\n            right: 2px;\n            top: 50%;\n            transform: translateY(-50%);\n            width: 8px;\n            height: 8px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n          }\n\n          .chevron-right svg {\n            width: 100%;\n            height: 100%;\n          }\n        </style>\n        <button>\n          <div class=\"content\">\n            <div class=\"brand\">\n              <div class=\"logo\">${ipayLogo}</div>\n            </div>\n            <p class=\"title\">Finansowanie koszyka</p>\n            <p class=\"subtitle\">dla os√≥b i firm</p>\n          </div>\n          <div class=\"action\">\n            <span>Oblicz</span>\n            <div class=\"green-dot\">\n              <div class=\"chevron-right\">\n                <svg width=\"8\" height=\"8\" viewBox=\"0 0 8 8\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <path d=\"M3 6L5 4L3 2\" stroke=\"#FFFFFF\" stroke-width=\"0.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                </svg>\n              </div>\n            </div>\n          </div>\n        </button>\n      `;\n  }\n\n  attributeChangedCallback() {\n    if (this.shadowRoot) {\n      this.render();\n      this.addEventListeners();\n    }\n  }\n}\n\n// Register the component\ncustomElements.define('ipay-button-cart', IpayButtonCart);\n\n// Export for module usage\nexport { IpayButtonCart };\n\n"],"names":["IpayButtonCart","HTMLElement","observedAttributes","constructor","super","this","attachShadow","mode","connectedCallback","render","addEventListeners","button","shadowRoot","querySelector","addEventListener","handleClick","parseCartItems","cartItemsAttr","getAttribute","items","JSON","parse","Array","isArray","console","warn","e","error","id","name","email","phone","delivery_price","product_id","cartItems","length","params","URLSearchParams","append","forEach","item","index","url","price","count","toString","targetUrl","window","open","innerHTML","ipayLogo","attributeChangedCallback","customElements","define"],"mappings":"uCAOA,MAAMA,UAAuBC,YAC3B,6BAAWC,GACT,MAAO,CACL,KACA,OACA,QACA,QACA,iBACA,aACA,aAEH,CAED,WAAAC,GACEC,QACAC,KAAKC,aAAa,CAAEC,KAAM,QAC3B,CAED,iBAAAC,GACEH,KAAKI,SACLJ,KAAKK,mBACN,CAED,iBAAAA,GACE,MAAMC,EAASN,KAAKO,WAAWC,cAAc,UACzCF,GACFA,EAAOG,iBAAiB,QAAS,KAC/BT,KAAKU,eAGV,CAED,cAAAC,GACE,MAAMC,EAAgBZ,KAAKa,aAAa,cACxC,IAAKD,EACH,MAAO,GAGT,IACE,MAAME,EAAQC,KAAKC,MAAMJ,GACzB,OAAKK,MAAMC,QAAQJ,GAIZA,GAHLK,QAAQC,KAAK,iDACN,GAGV,CAAC,MAAOC,GAEP,OADAF,QAAQG,MAAM,yDAA0DD,GACjE,EACR,CACF,CAED,WAAAX,GAEE,MAAMa,EAAKvB,KAAKa,aAAa,MACvBW,EAAOxB,KAAKa,aAAa,QACzBY,EAAQzB,KAAKa,aAAa,SAC1Ba,EAAQ1B,KAAKa,aAAa,SAC1Bc,EAAiB3B,KAAKa,aAAa,kBACnCe,EAAa5B,KAAKa,aAAa,cAG/BgB,EAAY7B,KAAKW,iBAEvB,GAAyB,IAArBkB,EAAUC,OAEZ,YADAX,QAAQC,KAAK,4CAKf,MAAMW,EAAS,IAAIC,gBAGfT,GAAIQ,EAAOE,OAAO,KAAMV,GACxBC,GAAMO,EAAOE,OAAO,OAAQT,GAC5BC,GAAOM,EAAOE,OAAO,QAASR,GAC9BC,GAAOK,EAAOE,OAAO,QAASP,GAC9BC,GAAgBI,EAAOE,OAAO,iBAAkBN,GAChDC,GAAYG,EAAOE,OAAO,aAAcL,GAI5CC,EAAUK,QAAQ,CAACC,EAAMC,KACnBD,EAAKE,KAAKN,EAAOE,OAAO,SAASG,UAAeD,EAAKE,KACrDF,EAAKG,OAAOP,EAAOE,OAAO,SAASG,YAAiBD,EAAKG,OACzDH,EAAKI,OAAOR,EAAOE,OAAO,SAASG,YAAiBD,EAAKI,OAGzDJ,EAAKP,YAAYG,EAAOE,OAAO,SAASG,iBAAsBD,EAAKP,cAIzEG,EAAOE,OAAO,cAAeJ,EAAUC,OAAOU,YAG9C,MAAMC,EAAY,yDAAiBV,EAAOS,aAC1CE,OAAOC,KAAKF,EAAW,SACxB,CAED,MAAArC,GACEJ,KAAKO,WAAWqC,UAAY,8iHAqIEC,uoBAiB/B,CAED,wBAAAC,GACM9C,KAAKO,aACPP,KAAKI,SACLJ,KAAKK,oBAER,EAIH0C,eAAeC,OAAO,mBAAoBrD"}